(()=>{var e={};e.id=653,e.ids=[653],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},12412:e=>{"use strict";e.exports=require("assert")},55511:e=>{"use strict";e.exports=require("crypto")},94735:e=>{"use strict";e.exports=require("events")},29021:e=>{"use strict";e.exports=require("fs")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},27910:e=>{"use strict";e.exports=require("stream")},79551:e=>{"use strict";e.exports=require("url")},28354:e=>{"use strict";e.exports=require("util")},74075:e=>{"use strict";e.exports=require("zlib")},50268:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>i.a,__next_app__:()=>p,pages:()=>d,routeModule:()=>x,tree:()=>c});var r=s(70260),a=s(28203),o=s(25155),i=s.n(o),l=s(67292),n={};for(let e in l)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(n[e]=()=>l[e]);s.d(t,n);let c=["",{children:["(app)",{children:["details",{children:["[product_details]",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,81046)),"C:\\xampp\\htdocs\\Hoorbok-frontend\\HoorBook\\src\\app\\(app)\\details\\[product_details]\\page.tsx"]}]},{}]},{}]},{"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,71354)),"C:\\xampp\\htdocs\\Hoorbok-frontend\\HoorBook\\src\\app\\layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,19937,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,41485,23)),"next/dist/client/components/unauthorized-error"]}],d=["C:\\xampp\\htdocs\\Hoorbok-frontend\\HoorBook\\src\\app\\(app)\\details\\[product_details]\\page.tsx"],p={require:s,loadChunk:()=>Promise.resolve()},x=new r.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/(app)/details/[product_details]/page",pathname:"/details/[product_details]",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},45282:(e,t,s)=>{Promise.resolve().then(s.bind(s,81046))},63434:(e,t,s)=>{Promise.resolve().then(s.bind(s,96184))},44269:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let r=(0,s(41680).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},79334:(e,t,s)=>{"use strict";var r=s(58686);s.o(r,"usePathname")&&s.d(t,{usePathname:function(){return r.usePathname}}),s.o(r,"useRouter")&&s.d(t,{useRouter:function(){return r.useRouter}})},96184:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>N});var r=s(45512),a=s(25321),o=s(18616),i=s(79334),l=s(58009),n=s(45103),c=s(83454),d=s(24640);let p=({children:e,classname:t="",onclick:s,disabeld:a=!1,type:o="button",theme:i=""})=>(0,r.jsx)("button",{type:o,onClick:s,className:`${"primary"===i?"bg-btn-color rounded-[36px] text-white p-2 w-[135px] h-[46px]":"bg-card-color rounded-[36px] text-white p-2 w-[135px] h-[46px]"} ${t}`,disabled:a,children:e});var x=s(25998),u=s(22403);function m({productId:e,imageUrl:t,onClose:s}){let[a,o]=(0,l.useState)(0),[i,c]=(0,l.useState)(0),[d,p]=(0,l.useState)(""),[m,h]=(0,l.useState)(!1),f=x.A.get("access_token_login"),b=async()=>{if(0===a||""===d.trim()){alert("يرجى تحديد التقييم وكتابة تعليق");return}let t={reviewable_type:"product",reviewable_id:e,review:a.toString(),comment:d.trim()},r={Authorization:`Bearer ${f}`,userType:"2",fcmToken:"fGS7RgUcR66lms505IQllc:APA91bF-AdXcn94TKHQ2eKEqTX22eQTxr6LRSwpHyzwWXjvwBFfLQ_yYWO0ZNfd9ScbxHjKBZaGLosJK2G1wfrKp6G4h3FeDfdNovPZD3PX8iV-ckfYf3ig",lang:"ar","Content-Type":"application/json"};try{let e=await fetch("https://hoorbookapp.com/api/reviews",{method:"POST",headers:r,body:JSON.stringify(t)}),a=await e.json();e.ok&&!0===a.status.status?(u.Ay.success("✅ تم إضافة التعليق بنجاح"),s()):u.Ay.error(a.status.validation_message||"❌ حدث خطأ حاول مرة أخرى")}catch(e){u.Ay.error("\uD83D\uDEAB خطأ في الإرسال، حاول مرة أخرى")}h(!1)};return(0,r.jsx)("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-lg w-full p-6 relative overflow-y-auto max-h-[90vh]",children:[(0,r.jsx)("button",{onClick:s,className:"absolute top-3 right-3 text-gray-600 hover:text-gray-900 text-3xl font-bold",children:"\xd7"}),(0,r.jsx)("div",{className:"w-full h-60 relative mb-4 rounded-lg overflow-hidden shadow-md",children:(0,r.jsx)(n.default,{src:t,alt:"صورة المنتج",fill:!0,objectFit:"contain",unoptimized:!0})}),(0,r.jsx)("h2",{className:"text-xl font-semibold mb-4 text-violet-900 text-center",children:"أضف تقييمك"}),(0,r.jsx)("div",{className:"flex justify-center mb-4",children:[1,2,3,4,5].map(e=>(0,r.jsx)("button",{type:"button",className:`text-3xl mx-1 transition ${(i||a)>=e?"text-yellow-400":"text-gray-400"}`,onClick:()=>o(e),onMouseEnter:()=>c(e),onMouseLeave:()=>c(0),children:"★"},e))}),(0,r.jsx)("textarea",{rows:5,className:"w-full border border-gray-300 rounded-md p-3 mb-4 resize-none focus:outline-none focus:ring-2 focus:ring-violet-500 text-black",placeholder:"اكتب تعليقك هنا...",value:d,onChange:e=>p(e.target.value)}),(0,r.jsx)("button",{onClick:b,disabled:m,className:"w-full bg-gradient-to-r from-orange-400 to-purple-500 text-white py-2 rounded-md font-semibold hover:opacity-90 transition disabled:opacity-50",children:m?"جاري الإرسال...":"إرسال"})]})})}var h=s(78973),f=s(34206),b=s(52706),g=s(99905),v=s(44269),j=s(17963);s(85668);var y=s(14992),k=s(34837);function N(){let[e,t]=(0,l.useState)(!1),[s,N]=(0,l.useState)(!1),w=`${a.B}api/carts`,_=(0,i.usePathname)().split("/").pop(),[P,C]=(0,l.useState)(),[$,A]=(0,l.useState)(null),[q,S]=(0,l.useState)("Piece"),[z,B]=(0,l.useState)(1),[E,F]=(0,l.useState)(null),H=(0,l.useRef)(null),R=(0,l.useRef)(null),[D,M]=(0,l.useState)(!1),[T,G]=(0,l.useState)({show:!1,message:""}),[K,L]=(0,l.useState)({product_type:"Piece",qty:1,product_id:Number(_)}),O=x.A.get("access_token_login"),X=(e,t)=>{L(s=>({...s,[e]:t}))};if(!P)return(0,r.jsxs)(r.Fragment,{children:[T.show&&(0,r.jsx)(f.A,{message:T.message,setClose:G}),(0,r.jsx)("div",{className:"text-center p-10",children:"جار التحميل..."})]});a.B,P.image;let I=P.media.find(e=>e.color_id===$),Q=I?.image||P.image,J=P.colors.find(e=>e.id===$),U="Packet"===q?P.colors.length>0&&J?Math.floor(J.stock/(P.packet_pieces||1)):Math.floor(P.stock/(P.packet_pieces||1)):P.colors.length>0&&J?J.stock:P.stock,Z="Piece"===q?P.piece_price_after_offer||P.piece_price:P.packet_price_after_offer||P.packet_price,V=async()=>{try{if(O){M(!1);let e={...K};e.product_id=P.id,0===P.colors.length&&delete e.color_id;let t=await (0,d.z)("post",w,e,a.b);console.log(t),null===t.data&&u.Ay.error("نفذت هذه الكميه برجاء اختيار كميه اقل"),t.status?.code===200&&(u.Ay.success("تمت الاضافه بنجاح"),await j.x.getState().refreshCartCount()),console.log(e)}else M(!0)}catch(e){console.log(e)}};return(0,r.jsxs)(o.A,{children:[(0,r.jsx)(c.A,{}),(0,r.jsxs)("div",{className:"max-w-6xl mx-auto px-4 py-10 grid grid-cols-1 md:grid-cols-2 gap-10 relative",children:[(0,r.jsx)("div",{className:"flex justify-center md:justify-end",children:(0,r.jsx)("div",{className:"w-full max-w-md aspect-square relative rounded-2xl overflow-hidden shadow-lg",children:P.colors.length>0?(0,r.jsx)(n.default,{src:`${a.B}/${Q}`,alt:"صورة المنتج",fill:!0,style:{objectFit:"contain"},className:"rounded-xl cursor-pointer ",onClick:()=>{N(!0),F(`${a.B}/${Q}`)},unoptimized:!0}):P.media&&P.media.length>0?(0,r.jsxs)(y.RC,{modules:[k.Vx,k.dK],onBeforeInit:e=>{let t=e.params.navigation;t.prevEl=H.current,t.nextEl=R.current},pagination:{clickable:!0},loop:!0,className:"w-full  h-full",children:[P.media.map(e=>(0,r.jsx)(y.qr,{children:(0,r.jsx)(n.default,{src:`${a.B}/${e.image}`,alt:"صورة  المنتج",fill:!0,style:{objectFit:"contain"},className:"rounded-xl cursor-pointer ",onClick:()=>{N(!0),F(`${a.B}/${e.image}`)},unoptimized:!0})},e.id)),(0,r.jsx)("div",{ref:H,className:"absolute top-1/2 -translate-y-1/2  left-2 z-50 bg-[#370841] text-white p-2 rounded-full cursor-pointer hover:bg-gray-600 transition",children:(0,r.jsx)(b.A,{size:24})}),(0,r.jsx)("div",{ref:R,className:"absolute top-1/2 -translate-y-1/2 right-2 z-50 bg-[#370841] text-white p-2 rounded-full cursor-pointer hover:bg-gray-600 transition",children:(0,r.jsx)(g.A,{size:24})})]}):(0,r.jsx)(n.default,{src:`${a.B}/${P.image}`,alt:"صورة المنتج",fill:!0,style:{objectFit:"contain"},className:"rounded-xl cursor-pointer",onClick:()=>{N(!0),F(`${a.B}/${P.image}`)},unoptimized:!0})})}),(0,r.jsxs)("div",{className:"flex flex-col justify-center",children:[(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold mb-4 text-violet-900",children:P.name}),(0,r.jsxs)("div",{className:"flex gap-4 mb-4",children:[(0,r.jsx)("button",{className:`flex-1 px-4 py-2 border rounded-md transition text-sm md:text-base ${"Piece"===q?"bg-violet-100 border-violet-600 font-semibold text-black":"border-gray-300 text-black"}`,onClick:()=>{S("Piece"),X("product_type","Piece"),X("qty",1),B(1)},children:""===P.piece_price_after_offer?`قطعة (${P.piece_price} ج.م)`:(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{children:["قطعة (",P.piece_price_after_offer," ج.م)"]}),(0,r.jsxs)("span",{className:"line-through text-gray-400",children:["قطعة (",P.piece_price," ج.م)"]})]})}),0!==P.packet_pieces&&(0,r.jsx)("button",{className:`flex-1 px-4 py-2 border rounded-md transition text-sm md:text-base ${"Packet"===q?"bg-violet-100 border-violet-600 font-semibold text-black":"border-gray-300 text-black"}`,onClick:()=>{S("Packet"),X("product_type","Packet"),X("qty",1),B(1)},children:""===P.packet_price_after_offer?(0,r.jsxs)(r.Fragment,{children:["دسته (",P.packet_pieces,"قطع  )",(0,r.jsx)("br",{}),P.packet_price," ج.م"]}):(0,r.jsxs)("div",{className:"flex flex-col",children:[(0,r.jsxs)("span",{children:[" دسته ( ",P.packet_pieces," قطع )"]}),(0,r.jsxs)("span",{className:"text-black",children:["(",P.packet_price_after_offer," )ج.م",(0,r.jsxs)("span",{className:"line-through text-gray-500 text-sm pr-1",children:["( ",P.packet_price," ج.م )دسته"]})]})]})})]}),(0,r.jsx)("div",{className:"mb-4",children:P.colors.length>0?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("p",{className:"text-sm text-gray-700 mb-2",children:"اختر اللون:"}),(0,r.jsx)("div",{className:"flex gap-3 flex-wrap",children:P.colors.map(e=>(0,r.jsx)("div",{onClick:()=>{A(e.id),X("color_id",e.id),B(1),X("qty",1)},className:`w-10 h-10 rounded-full border-4 cursor-pointer transition-transform ${$===e.id?"border-black scale-110":"border-gray-300"}`,style:{backgroundColor:e.code}},e.id))})]}):""}),J&&0===J.stock||!J&&0===P.stock?(0,r.jsx)("p",{className:"text-red-600 font-semibold mb-4 text-sm md:text-base",children:"نفذت الكميه"}):(0,r.jsx)("p",{className:"text-green-600 font-semibold mb-4 text-sm md:text-base",children:" متوفر حالياً"}),(0,r.jsxs)("div",{className:"flex items-center justify-between mb-6 text-black",children:[(0,r.jsxs)("span",{className:"text-2xl font-bold text-orange-600",children:[Z," ج.م"]}),J&&0===J.stock||!J&&0===P.stock?(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("select",{value:z,onChange:e=>{let t=Number(e.target.value);B(t),X("qty",t)},className:"p-2 border rounded-md text-sm",disabled:0===U,children:[(0,r.jsx)("option",{value:0,disabled:!0,children:"مفذت الكمية"}),Array.from({length:1},(e,t)=>t+1).map(e=>(0,r.jsx)("option",{value:e,children:"0"},e))]}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Packet"===q?`(متاح ${U} ${U>1?"دسته":"كرتونة"})`:"Piece"===q?J?`(متاح ${J.stock} قطعة)`:`(متاح ${P.stock} قطعة)`:""})]}):(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsxs)("select",{value:z,onChange:e=>{let t=Number(e.target.value);B(t),X("qty",t)},className:"p-2 border rounded-md text-sm",disabled:0===U,children:[(0,r.jsx)("option",{value:0,disabled:!0,children:"اختر الكمية"}),Array.from({length:U},(e,t)=>t+1).map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)("span",{className:"text-sm text-gray-600",children:"Packet"===q?`(متاح ${U} ${U>1?"دسته":"كرتونة"})`:"Piece"===q?J?`(متاح ${J.stock} قطعة)`:`(متاح ${P.stock} قطعة)`:""})]})]}),(0,r.jsx)("button",{className:"w-full bg-gradient-to-r from-orange-400 to-purple-500 text-white py-3 rounded-lg text-lg font-semibold shadow-lg hover:opacity-90 transition",onClick:()=>{V()},disabled:0===U,children:"\uD83D\uDED2 أضف إلى السلة"})]}),(0,r.jsxs)("div",{className:"md:col-span-2 mt-10",children:[(0,r.jsx)("h2",{className:"font-semibold text-lg text-violet-900 mb-2",children:"\uD83D\uDCE6 تفاصيل المنتج:"}),(0,r.jsx)("div",{className:"text-gray-800 text-sm leading-relaxed space-y-2",children:P.desc.split("\r\n").map((e,t)=>(0,r.jsx)("p",{children:e},t))})]}),(0,r.jsxs)("div",{className:"md:col-span-2 mt-10",children:[(0,r.jsx)("h3",{className:"text-md font-semibold text-violet-900 mb-3",children:null!==P.reviews_avg?`⭐ تقييمات المستخدمين (${P.reviews_avg.toFixed(1)})`:(0,r.jsx)("span",{className:"text-gray-400",children:"كن انت اول المقيمين "})}),(0,r.jsxs)("div",{className:"space-y-4 relative",children:[(0,r.jsxs)("div",{className:"comment",children:[(0,r.jsx)(p,{theme:"primary",onclick:()=>t(!0),children:"Add Comment"}),e&&(0,r.jsx)(m,{productId:Number(_),onClose:()=>t(!1),imageUrl:`${a.B}${P.image}`})]}),P.reviews.map(e=>(0,r.jsxs)("div",{className:"border rounded-md p-4 bg-gray-50 shadow-sm",children:[(0,r.jsx)("p",{className:"text-gray-700",children:e.comment}),(0,r.jsx)("p",{className:"text-gray-500 text-xs mt-2",children:new Date(e.created_at).toLocaleDateString()})]},e.id))]}),D&&(0,r.jsx)(h.M,{show:D})]}),s&&(0,r.jsx)("div",{className:"scale_image fixed inset-0 bg-black bg-opacity-60 flex items-center justify-center z-[1000]",children:(0,r.jsxs)("div",{className:"bg-white rounded-lg shadow-xl p-4 max-w-[90vw] max-h-[90vh] relative",onClick:()=>N(!1),children:[(0,r.jsx)("button",{className:"absolute top-2 right-2 text-gray-600 hover:text-black bg-white rounded-full shadow-md p-1",children:(0,r.jsx)(v.A,{size:24})}),(0,r.jsx)("div",{className:"relative w-[80vw] h-[80vh]",children:(0,r.jsx)(n.default,{src:`${E}`,alt:"صورة المنتج",fill:!0,style:{objectFit:"contain"},className:"transition-transform duration-300 hover:scale-105 rounded-xl cursor-pointer",unoptimized:!0})})]})})]})]})}s(2822),s(55866),s(84120)},34206:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(45512);s(58009);let a=({message:e,setClose:t})=>(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,r.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 sm:p-8 w-[90%] max-w-sm text-center",children:[(0,r.jsx)("div",{className:"mb-4 text-lg text-black",children:e}),(0,r.jsx)("button",{className:"text-purple-700 font-bold mt-2",onClick:()=>t({show:!1,message:""}),children:"تأكيد"})]})})})},24640:(e,t,s)=>{"use strict";s.d(t,{z:()=>o});var r=s(85668);let a=()=>null,o=async(e,t,s={},o={})=>{try{a();let i={"Content-Type":"application/json",...o};return(await (0,r.A)({method:e,url:t,headers:i,data:s})).data}catch(e){if(r.A.isAxiosError(e)){if(e.response?.data)throw Error(`Error: ${e.response?.status} - ${JSON.stringify(e.response.data)}`);if(e.request)throw Error("No response received from server.")}throw Error(`Unexpected error: ${String(e)}`)}}},81046:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"C:\\\\xampp\\\\htdocs\\\\Hoorbok-frontend\\\\HoorBook\\\\src\\\\app\\\\(app)\\\\details\\\\[product_details]\\\\page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"C:\\xampp\\htdocs\\Hoorbok-frontend\\HoorBook\\src\\app\\(app)\\details\\[product_details]\\page.tsx","default")}};var t=require("../../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[10,600,455,609,566],()=>s(50268));module.exports=r})();