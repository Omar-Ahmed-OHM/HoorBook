"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[9088],{9088:(e,a,t)=>{t.d(a,{A:()=>p});var l=t(5155),r=t(2115),s=t(3811),n=t(2610),o=t.n(n);t(133);var i=t(1466),d=t(3577),c=t(9110),m=t(7223),u=t(2651),x=t(5037),h=t(7351),b=t(767),g=t(8918);let v="".concat(h.B,"api"),p=e=>{let{open:a,address:t,onClose:n,onSave:p}=e,[y,f]=(0,r.useState)({show:!1,message:""}),[j,N]=(0,r.useState)([]),[w,k]=(0,r.useState)([]),[I,A]=(0,r.useState)([]),[_,C]=(0,r.useState)({name:"",phone:"",governorateId:"",cityId:"",areaId:"",details:"",governorate:"",city:"",area:""});(0,r.useEffect)(()=>{u.A.get("".concat(v,"/governorates")).then(e=>N(e.data.data)).catch(()=>{f({show:!0,message:"فشل تحميل المحافظات"})})},[]),(0,r.useEffect)(()=>{var e;if(!_.governorate)return;let a=null==j?void 0:null===(e=j.find(e=>e.name_ar===_.governorate))||void 0===e?void 0:e.id;u.A.get("".concat(v,"/cities?governorate_id=").concat(a)).then(e=>k(e.data.data)).catch(()=>{x.Ay.error("فشل تحميل المدن")})},[_.governorate]),(0,r.useEffect)(()=>{var e;if(!_.city)return;let a=null==w?void 0:null===(e=w.find(e=>e.name_ar===_.city))||void 0===e?void 0:e.id;u.A.get("".concat(v,"/areas?city_id=").concat(a)).then(e=>A(e.data.data)).catch(()=>{x.Ay.error("فشل تحميل المناطق")})},[_.city]),(0,r.useEffect)(()=>{if(t){var e,a,l,r,s,n;C({name:t.full_name||"",phone:t.phone||"",governorateId:(null===(e=t.governorate)||void 0===e?void 0:e.id)||"",cityId:(null===(a=t.city)||void 0===a?void 0:a.id)||"",areaId:(null===(l=t.area)||void 0===l?void 0:l.id)||"",details:t.address_details||"",governorate:(null===(r=t.governorate)||void 0===r?void 0:r.name)||"",city:(null===(s=t.city)||void 0===s?void 0:s.name)||"",area:(null===(n=t.area)||void 0===n?void 0:n.name)||""})}},[t]);let S=(e,a)=>{C(t=>({...t,[e]:a}))},z=async e=>{if(e.preventDefault(),!["name","phone","governorateId","cityId","areaId","details"].every(e=>_[e]))return f({show:!0,message:"يرجى ملء جميع الحقول المطلوبة"});try{let e=await u.A.put("".concat(v,"/address/").concat(null==t?void 0:t.id),(0,g.n)(_),{headers:h.b});200===e.status?(x.Ay.success("تم تعديل العنوان بنجاح!"),n(),p&&p()):x.Ay.error("حدث خطأ أثناء حفظ العنوان")}catch(e){x.Ay.error("حدث خطأ أثناء حفظ العنوان")}};return a?(0,l.jsxs)("div",{className:"fixed inset-0 z-[1200] flex items-center justify-center bg-black bg-opacity-40 no_scrollbar",onClick:e=>{e.target===e.currentTarget&&n()},children:[(0,l.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-4 sm:p-8 w-full max-w-md sm:max-w-lg md:max-w-xl space-y-6 border border-purple-100 relative mx-2 sm:mx-auto overflow-y-auto max-h-[70vh] md:max-h-[80vh] mt-20",children:[(0,l.jsx)("button",{className:"absolute top-1 right-3 p-2 rounded-full text-gray-500 hover:text-red-600 transition ",onClick:n,title:"إغلاق",children:(0,l.jsx)(b.A,{size:20})}),(0,l.jsx)("h3",{className:"text-2xl font-bold mb-4 text-purple-800 text-center flex items-center gap-1",children:"تعديل العنوان"}),(0,l.jsxs)("form",{onSubmit:z,className:"space-y-4",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-bold mb-1 text-black",children:"الاسم كاملًا"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(i.A,{className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400",size:20}),(0,l.jsx)("input",{type:"text",className:"outline-none w-full border rounded-md p-3 pr-12 text-right text-black placeholder:text-gray-400 bg-white border-gray-400 shadow-md",placeholder:"أدخل اسمك كاملًا",value:_.name,onChange:e=>S("name",e.target.value.replace(/[^a-zA-Z\u0600-\u06FF ]/g,""))})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block font-bold mb-1 text-black",children:"رقم الهاتف"}),(0,l.jsx)("div",{className:"w-full border rounded-md p-3 flex items-center bg-white border-gray-400 shadow-md",dir:"rtl",children:(0,l.jsx)(o(),{countryCodeEditable:!1,country:"eg",value:_.phone,onChange:e=>S("phone",e),placeholder:"رقم الهاتف",enableSearch:!0,specialLabel:"",inputStyle:{direction:"ltr",textAlign:"left",color:"#000",background:"transparent",border:"none",outline:"none",padding:"0.5rem 1rem",paddingLeft:"2.5rem"},buttonStyle:{border:"none",background:"transparent"},containerStyle:{direction:"ltr",display:"flex",alignItems:"center",color:"#000"}})})]}),(0,l.jsxs)("div",{className:"text-black",children:[(0,l.jsx)("label",{className:"block font-bold mb-1",children:"المحافظة"}),(0,l.jsx)(s.A,{title:"المحافظة",placeholder:"اختر المحافظة",selectedValue:_.governorate,options:null==j?void 0:j.map(e=>e.name_ar),onSelect:e=>{let a=j.find(a=>a.name_ar===e);S("governorate",e),S("governorateId",a?a.id:""),S("city",""),S("cityId",""),S("area",""),S("areaId","")},icon:(0,l.jsx)(d.A,{size:20})})]}),(0,l.jsxs)("div",{className:"text-black",children:[(0,l.jsx)("label",{className:"block font-bold mb-1",children:"المدينة"}),(0,l.jsx)(s.A,{title:"المدينة",placeholder:"اختر المدينة",selectedValue:_.city,options:null==w?void 0:w.map(e=>e.name_ar),onSelect:e=>{if(!_.governorateId)return f({show:!0,message:"اختر المحافظة أولاً"});let a=w.find(a=>a.name_ar===e);S("city",e),S("cityId",a?a.id:""),S("area",""),S("areaId","")},icon:(0,l.jsx)(c.A,{size:20}),canOpen:!!_.governorateId,onBlockedOpen:()=>f({show:!0,message:"اختر المحافظة أولاً"})})]}),(0,l.jsxs)("div",{className:"text-black",children:[(0,l.jsx)("label",{className:"block font-bold mb-1",children:"المنطقة"}),(0,l.jsx)(s.A,{title:"المنطقة",placeholder:"اختر منطقتك او أقرب منطقة لك",selectedValue:_.area,options:null==I?void 0:I.map(e=>e.name_ar),onSelect:e=>{if(!_.cityId)return f({show:!0,message:"اختر المدينة أولاً"});let a=I.find(a=>a.name_ar===e);S("area",e),S("areaId",a?a.id:"")},icon:(0,l.jsx)(m.A,{size:20}),canOpen:!!_.cityId,onBlockedOpen:()=>f({show:!0,message:"اختر المدينة أولاً"})})]}),(0,l.jsxs)("div",{className:"text-black",children:[(0,l.jsx)("label",{className:"block font-bold mb-1",children:"تفاصيل العنوان"}),(0,l.jsxs)("div",{className:"relative",children:[(0,l.jsx)(m.A,{className:"absolute right-3 top-3 text-gray-400",size:20}),(0,l.jsx)("textarea",{className:"w-full border rounded-md p-3 pr-12 text-right border-gray-400 shadow-md resize-none outline-none",placeholder:"ادخل تفاصيل العنوان ( الشارع رقم المنزل ) وعلامة محددة",value:_.details,onChange:e=>S("details",e.target.value)})]})]}),(0,l.jsx)("button",{type:"submit",className:"w-full bg-gradient-to-r from-purple-700 to-orange-400 text-white font-bold py-2 rounded-lg shadow-lg hover:scale-[1.02] transition-all duration-300 mt-2",children:"حفظ التعديلات"})]})]}),y.show&&(0,l.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-40 flex items-center justify-center z-50",children:(0,l.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-8 min-w-[300px] text-center",children:[(0,l.jsx)("div",{className:"mb-4 text-lg text-black",children:y.message}),(0,l.jsx)("button",{className:"text-purple-700 font-bold mt-2",onClick:()=>f({show:!1,message:""}),children:"تأكيد"})]})})]}):null}},3811:(e,a,t)=>{t.d(a,{A:()=>c});var l=t(5155),r=t(2115),s=t(8087),n=t(5264),o=t(1536),i=t(4047),d=t.n(i);function c(e){let{title:a,placeholder:t,selectedValue:i,options:c,onSelect:m,icon:u,canOpen:x=!0,onBlockedOpen:h}=e,[b,g]=(0,r.useState)(!1),[v,p]=(0,r.useState)(""),[y,f]=(0,r.useState)(""),j=(0,r.useCallback)(d()(e=>f(e),300),[]),N=(0,r.useMemo)(()=>null==c?void 0:c.filter(e=>e.toLowerCase().includes(y.toLowerCase())),[c,y]),w=()=>{g(!1),p(""),f("")},k=e=>{m(e),w()};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)("div",{className:"relative mb-3",children:(0,l.jsxs)("button",{type:"button",onClick:()=>{x?(g(!0),p(""),f("")):h&&h()},className:"w-full border border-gray-400 shadow-md rounded-md p-3 bg-white text-right flex gap-5 items-center",children:[u&&(0,l.jsx)("span",{className:"text-gray-400",children:u}),(0,l.jsx)("span",{className:"text-sm ".concat(i?"":"text-gray-950"),children:i||t||"اختر ".concat(a)})]})}),(0,l.jsx)(s.e.Root,{show:b,as:r.Fragment,children:(0,l.jsxs)(n.lG,{as:"div",className:"relative z-[1300]",onClose:w,children:[(0,l.jsx)(s.e.Child,{as:r.Fragment,enter:"ease-out duration-200",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-150",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,l.jsx)("div",{className:"fixed inset-0 bg-black/30 z-[1300]"})}),(0,l.jsx)("div",{className:"fixed inset-x-0 bottom-0 lg:w-1/2 mx-auto z-[1300]",children:(0,l.jsx)(s.e.Child,{as:r.Fragment,enter:"transform transition ease-out duration-300",enterFrom:"translate-y-full",enterTo:"translate-y-0",leave:"transform transition ease-in duration-200",leaveFrom:"translate-y-0",leaveTo:"translate-y-full",children:(0,l.jsxs)(n.lG.Panel,{className:"bg-white rounded-t-2xl px-4 max-h-[70vh] overflow-y-auto relative z-[1400]",children:[(0,l.jsxs)("div",{className:"sticky top-0 bg-white z-10 p-3 border-b border-gray-200",children:[(0,l.jsx)(n.lG.Title,{className:"text-center font-bold text-xl mb-3 text-black",children:a}),(0,l.jsxs)("div",{className:"relative mb-4",children:[(0,l.jsx)("input",{type:"text",placeholder:"بحث",className:"w-full border border-black rounded-md p-2 pr-10 text-right outline-none text-gray-800",value:v,onChange:e=>{p(e.target.value),j(e.target.value)},"aria-label":"بحث"}),(0,l.jsx)(o.KSO,{className:"absolute right-3 top-3 text-gray-900"})]})]}),(0,l.jsxs)("ul",{className:"divide-y",children:[null==N?void 0:N.map((e,a)=>(0,l.jsx)("li",{className:"py-3 px-2 text-right cursor-pointer hover:bg-gray-100 text-black",onClick:()=>k(e),tabIndex:0,role:"option","aria-selected":i===e,children:e},a)),(null==N?void 0:N.length)===0&&(0,l.jsx)("li",{className:"text-center text-gray-900 py-4",children:"لا توجد نتائج"})]})]})})})]})})]})}},8918:(e,a,t)=>{t.d(a,{n:()=>l});function l(e){return{full_name:e.name,phone:e.phone,governorate_id:e.governorateId,city_id:e.cityId,area_id:e.areaId,address_details:e.details,latitude:"9.933468557950285",longitude:"31.8412072956562"}}}}]);